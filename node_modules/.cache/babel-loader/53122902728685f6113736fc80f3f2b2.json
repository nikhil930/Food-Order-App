{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Nikhil/Desktop/Projects/FoodOrderApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Nikhil/Desktop/Projects/FoodOrderApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/Users/Nikhil/Desktop/Projects/FoodOrderApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Nikhil/Desktop/Projects/FoodOrderApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import classes from'./Cart.module.css';import Modal from'../UI/Modal';import{useContext,useState}from'react';import CartContext from'../../store/cart-context';import CartItem from'./CartItem';import CheckOut from'./CheckOut';import React from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Cart=function Cart(props){var cartCtx=useContext(CartContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),checkOut=_useState2[0],setIsCheckOut=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitted=_useState4[0],setIsSubmitted=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),didSubmit=_useState6[0],setDidSubmit=_useState6[1];var totalAmount=\"$\".concat(cartCtx.totalAmount.toFixed(2));var hasItems=cartCtx.items.length>0;var cartItemRemoveHandler=function cartItemRemoveHandler(id){cartCtx.removeItem(id);};var cartItemAddHandler=function cartItemAddHandler(item){var cartItem=_objectSpread(_objectSpread({},item),{},{amount:1});cartCtx.addItem(cartItem);};var eventClickHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userdata){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsSubmitted(true);_context.next=3;return fetch('https://react-http-8d93b-default-rtdb.firebaseio.com/food.json',{method:'POST',body:JSON.stringify({user:userdata,cart:cartCtx.items}),headers:{'Content-Type':'application/json'}});case 3:setIsSubmitted(false);setDidSubmit(true);cartCtx.clearOnSubmit();// if(!response.ok)\n// {\n//     // console.log(\"^\");\n//     throw new Error('Something went wrong');\n// }\n// const data = response.json();\n// console.log(data);\ncase 6:case\"end\":return _context.stop();}}},_callee);}));return function eventClickHandler(_x){return _ref.apply(this,arguments);};}();var orderHandler=function orderHandler(){setIsCheckOut(true);};var CartItems=/*#__PURE__*/_jsx(\"ul\",{className:classes['cart-items'],children:cartCtx.items.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(CartItem,{name:item.name,amount:item.amount,price:item.price,onRemove:cartItemRemoveHandler.bind(null,item.id),onAdd:cartItemAddHandler.bind(null,item)},item.id)});})});var cartModalContent=/*#__PURE__*/_jsxs(_Fragment,{children:[CartItems,/*#__PURE__*/_jsxs(\"div\",{className:classes.total,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"span\",{children:totalAmount})]}),checkOut&&/*#__PURE__*/_jsx(CheckOut,{onCancel:props.onClose,onAdd:eventClickHandler}),!checkOut&&/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(\"button\",{className:classes['button--alt'],onClick:props.onClose,children:\"Close\"}),hasItems&&/*#__PURE__*/_jsx(\"button\",{className:classes.button,onClick:orderHandler,children:\"Order\"})]})]});var SubmittingModalContent=/*#__PURE__*/_jsx(\"h2\",{children:\"Sending order...\"});var SubmittedModalContent=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order is successfully placed.\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:props.onClose,children:\"Close\"})}),\" ;\"]});return/*#__PURE__*/_jsxs(Modal,{onClose:props.onClose,children:[!isSubmitted&&!didSubmit&&cartModalContent,isSubmitted&&SubmittingModalContent,didSubmit&&SubmittedModalContent]});};export default Cart;","map":{"version":3,"sources":["C:/Users/Nikhil/Desktop/Projects/FoodOrderApp/src/components/Cart/Cart.js"],"names":["classes","Modal","useContext","useState","CartContext","CartItem","CheckOut","React","Cart","props","cartCtx","checkOut","setIsCheckOut","isSubmitted","setIsSubmitted","didSubmit","setDidSubmit","totalAmount","toFixed","hasItems","items","length","cartItemRemoveHandler","id","removeItem","cartItemAddHandler","item","cartItem","amount","addItem","eventClickHandler","userdata","fetch","method","body","JSON","stringify","user","cart","headers","clearOnSubmit","orderHandler","CartItems","map","name","price","bind","cartModalContent","total","onClose","actions","button","SubmittingModalContent","SubmittedModalContent"],"mappings":"4oBAAA,MAAOA,CAAAA,OAAP,KAAoB,mBAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,aAAlB,CACA,OAASC,UAAT,CAAsBC,QAAtB,KAAsC,OAAtC,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAGA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAAAC,KAAK,CAAG,CACjB,GAAMC,CAAAA,OAAO,CAACR,UAAU,CAACE,WAAD,CAAxB,CAEA,cAAkCD,QAAQ,CAAC,KAAD,CAA1C,wCAAOQ,QAAP,eAAiBC,aAAjB,eACA,eAAqCT,QAAQ,CAAC,KAAD,CAA7C,yCAAOU,WAAP,eAAoBC,cAApB,eACA,eAAkCX,QAAQ,CAAC,KAAD,CAA1C,yCAAOY,SAAP,eAAkBC,YAAlB,eAEA,GAAMC,CAAAA,WAAW,YAAOP,OAAO,CAACO,WAAR,CAAoBC,OAApB,CAA4B,CAA5B,CAAP,CAAjB,CACC,GAAMC,CAAAA,QAAQ,CAAET,OAAO,CAACU,KAAR,CAAcC,MAAd,CAAqB,CAArC,CACD,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAAAC,EAAE,CAAE,CAC9Bb,OAAO,CAACc,UAAR,CAAmBD,EAAnB,EACH,CAFD,CAIA,GAAME,CAAAA,kBAAkB,CAAC,QAAnBA,CAAAA,kBAAmB,CAAAC,IAAI,CAAE,CAC3B,GAAMC,CAAAA,QAAQ,gCAAKD,IAAL,MAAUE,MAAM,CAAC,CAAjB,EAAd,CACAlB,OAAO,CAACmB,OAAR,CAAgBF,QAAhB,EACH,CAHD,CAIA,GAAMG,CAAAA,iBAAiB,0FAAG,iBAAMC,QAAN,kHACtBjB,cAAc,CAAC,IAAD,CAAd,CADsB,sBAEjBkB,CAAAA,KAAK,CAAC,gEAAD,CACV,CACIC,MAAM,CAAC,MADX,CAEIC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAChBC,IAAI,CAACN,QADW,CAEhBO,IAAI,CAAC5B,OAAO,CAACU,KAFG,CAAf,CAFT,CAKImB,OAAO,CAAC,CACJ,eAAe,kBADX,CALZ,CADU,CAFY,QAatBzB,cAAc,CAAC,KAAD,CAAd,CACAE,YAAY,CAAC,IAAD,CAAZ,CACAN,OAAO,CAAC8B,aAAR,GACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAvBsB,sDAAH,kBAAjBV,CAAAA,iBAAiB,4CAAvB,CA0BA,GAAMW,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAI,CACrB7B,aAAa,CAAC,IAAD,CAAb,CACH,CAFD,CAIA,GAAM8B,CAAAA,SAAS,cAAC,WAAI,SAAS,CAAE1C,OAAO,CAAC,YAAD,CAAtB,UAEZU,OAAO,CAACU,KAAR,CAAcuB,GAAd,CAAkB,SAAAjB,IAAI,CAAE,CACvB,mBAAO,iCAAI,KAAC,QAAD,EACX,IAAI,CAAEA,IAAI,CAACkB,IADA,CAEX,MAAM,CAAElB,IAAI,CAACE,MAFF,CAGX,KAAK,CAAEF,IAAI,CAACmB,KAHD,CAIX,QAAQ,CAAEvB,qBAAqB,CAACwB,IAAtB,CAA2B,IAA3B,CAAgCpB,IAAI,CAACH,EAArC,CAJC,CAKX,KAAK,CAAEE,kBAAkB,CAACqB,IAAnB,CAAwB,IAAxB,CAA6BpB,IAA7B,CALI,EAAeA,IAAI,CAACH,EAApB,CAAJ,EAAP,CAQA,CATD,CAFY,EAAhB,CAeA,GAAMwB,CAAAA,gBAAgB,cACtB,2BAEOL,SAFP,cAGM,aAAK,SAAS,CAAE1C,OAAO,CAACgD,KAAxB,wBACI,sCADJ,cAEI,sBAAO/B,WAAP,EAFJ,GAHN,CAOMN,QAAQ,eAAE,KAAC,QAAD,EAAU,QAAQ,CAAEF,KAAK,CAACwC,OAA1B,CAAmC,KAAK,CAAEnB,iBAA1C,EAPhB,CAQO,CAACnB,QAAD,eACD,aAAK,SAAS,CAAEX,OAAO,CAACkD,OAAxB,wBACI,eAAQ,SAAS,CAAElD,OAAO,CAAC,aAAD,CAA1B,CAA4C,OAAO,CAAES,KAAK,CAACwC,OAA3D,mBADJ,CAEK9B,QAAQ,eAAE,eAAQ,SAAS,CAAEnB,OAAO,CAACmD,MAA3B,CAAmC,OAAO,CAAEV,YAA5C,mBAFf,GATN,GADA,CAiBJ,GAAMW,CAAAA,sBAAsB,cAAC,wCAA7B,CACA,GAAMC,CAAAA,qBAAqB,cAC3B,wCACA,qDADA,cAEA,YAAK,SAAS,CAAErD,OAAO,CAACkD,OAAxB,uBACI,eAAQ,IAAI,CAAE,QAAd,CAAuB,OAAO,CAAEzC,KAAK,CAACwC,OAAtC,mBADJ,EAFA,QADA,CAQE,mBACE,MAAC,KAAD,EAAO,OAAO,CAAExC,KAAK,CAACwC,OAAtB,WACC,CAACpC,WAAD,EAAgB,CAACE,SAAjB,EAA8BgC,gBAD/B,CAEClC,WAAW,EAAIuC,sBAFhB,CAGCrC,SAAS,EAAIsC,qBAHd,GADF,CASD,CAjGD,CAmGA,cAAe7C,CAAAA,IAAf","sourcesContent":["import classes from './Cart.module.css';\r\nimport Modal from '../UI/Modal'\r\nimport { useContext , useState } from 'react';\r\nimport CartContext from '../../store/cart-context';\r\nimport CartItem from './CartItem';\r\nimport CheckOut from './CheckOut';\r\nimport React from 'react'\r\n\r\n\r\nconst Cart = props =>{\r\n    const cartCtx=useContext(CartContext);\r\n\r\n    const [checkOut ,setIsCheckOut] = useState(false);\r\n    const [isSubmitted ,setIsSubmitted] =useState(false);\r\n    const [didSubmit ,setDidSubmit] = useState(false);\r\n\r\n    const totalAmount = `$${cartCtx.totalAmount.toFixed(2)}`;\r\n     const hasItems= cartCtx.items.length>0;\r\n    const cartItemRemoveHandler = id=>{\r\n        cartCtx.removeItem(id);\r\n    };\r\n\r\n    const cartItemAddHandler=item=>{\r\n        const cartItem={...item,amount:1}\r\n        cartCtx.addItem(cartItem);\r\n    };\r\n    const eventClickHandler = async(userdata) =>{\r\n        setIsSubmitted(true);\r\n       await fetch('https://react-http-8d93b-default-rtdb.firebaseio.com/food.json',\r\n        {\r\n            method:'POST',\r\n            body:JSON.stringify({\r\n                user:userdata,\r\n                cart:cartCtx.items}),\r\n            headers:{\r\n                'Content-Type':'application/json'\r\n            }\r\n        })\r\n\r\n        setIsSubmitted(false);\r\n        setDidSubmit(true);\r\n        cartCtx.clearOnSubmit();\r\n        // if(!response.ok)\r\n        // {\r\n        //     // console.log(\"^\");\r\n        //     throw new Error('Something went wrong');\r\n        // }\r\n\r\n        // const data = response.json();\r\n        // console.log(data);\r\n    }\r\n\r\n    const orderHandler = ()=>{\r\n        setIsCheckOut(true);\r\n    }\r\n\r\n    const CartItems=<ul className={classes['cart-items']}>\r\n    {\r\n        cartCtx.items.map(item=>{\r\n         return <li><CartItem key={item.id}\r\n         name={item.name}\r\n         amount={item.amount}\r\n         price={item.price}\r\n         onRemove={cartItemRemoveHandler.bind(null,item.id)}\r\n         onAdd={cartItemAddHandler.bind(null,item)}\r\n         />\r\n         </li>\r\n        })\r\n    }\r\n</ul>\r\n\r\n    const cartModalContent =\r\n    <>\r\n    \r\n          {CartItems}\r\n          <div className={classes.total}>\r\n              <span>Total Amount</span>\r\n              <span>{totalAmount}</span>\r\n          </div>\r\n         {checkOut&&<CheckOut onCancel={props.onClose} onAdd={eventClickHandler}/>}\r\n         { !checkOut && \r\n          <div className={classes.actions}>\r\n              <button className={classes['button--alt']}  onClick={props.onClose}>Close</button>\r\n              {hasItems&&<button className={classes.button} onClick={orderHandler}>Order</button>}\r\n          </div>\r\n          }\r\n          \r\n     </>\r\nconst SubmittingModalContent=<h2>Sending order...</h2>\r\nconst SubmittedModalContent=\r\n<>\r\n<h2>Order is successfully placed.</h2>\r\n<div className={classes.actions}>\r\n    <button type ='submit' onClick={props.onClose}>Close</button>\r\n</div> ;\r\n</>\r\n   \r\n  return(\r\n    <Modal onClose={props.onClose}>\r\n    {!isSubmitted && !didSubmit && cartModalContent}\r\n    {isSubmitted && SubmittingModalContent}\r\n    {didSubmit && SubmittedModalContent}\r\n\r\n</Modal>\r\n     \r\n  ) \r\n}\r\n\r\nexport default Cart;"]},"metadata":{},"sourceType":"module"}